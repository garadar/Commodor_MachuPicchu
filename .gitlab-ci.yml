stages:
  - process

process_script:
  stage: process
  script:
    # checkout
    - git checkout main
    - git pull origin main
    # install dependencies
    - python3 --version  # Check Python version
    - pip3 install -r sources/script/requirements.txt
    # run
    - "[[ -z $(git branch -l ood) ]] && git checkout -b ood || git checkout ood"
    - git branch
    - python3 sources/script/generate_app.py sources/config .
    # push
    - ls
    - git status
    - git add .  # Stage changes
    - git status
    - git remote -v
    - git commit -m "build"
    - git push -u origin ood  # Push to the target branch
  artifacts:
    paths:
      - .
  only:
    - main  # Trigger the pipeline only on main branch updates